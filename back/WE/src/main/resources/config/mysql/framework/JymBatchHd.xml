<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="we.website.dao.JymBatchHdDao">
	
	<!-- 数据源信息检索 -->
	<select id="selectBatchAll" resultType="we.website.model.jym.BatchHdModel" >
		select *
		from jym_m_batch_hd
		<where>
		    1 = 1
		    <if test="externalBatchId != null">
				and external_batch_id = #{externalBatchId}
			</if>
			<if test="batchId != null">
				and batch_id = #{batchId}
			</if>
		</where>
	</select>
	
	<insert id="insertBatchHd" parameterType="we.website.model.jym.BatchHdModel">
		INSERT INTO jym_m_batch_hd(
			external_batch_id
			, batch_id
			, succeed
			, product_cnt
			, state_code
			, extra_err_msg
			, method_id
			, status
			, reason
			, create_at
			, update_at
		) VALUES (
			#{externalBatchId}
			, #{batchId}
			, #{succeed}
			, #{productCnt}
			, #{stateCode}
			, #{extraErrMsg}
			, #{methodId}
			, #{status}
			, #{reason}
			, now()
			, now()
		)
	</insert>
	
	<update id="updateBatchHd" parameterType="we.website.model.jym.BatchHdModel">
		update jym_m_batch_hd
		<set>
			<if test="batchId != null">
				batch_id = #{batchId}
			</if>
			<if test="succeed != null">
				, succeed = #{succeed}
			</if>
			<if test="productCnt != null">
				, product_cnt = #{productCnt}
			</if>
			<if test="stateCode != null">
				, state_code = #{stateCode}
			</if>
			<if test="extraErrMsg != null">
				, extra_err_msg = #{extraErrMsg}
			</if>
			<if test="methodId != null">
				, method_id = #{methodId}
			</if>
			<if test="status != null">
				, status = #{status}
			</if>
			<if test="reason != null">
				, reason = #{reason}
			</if>
			, update_at = now()
		</set>
		<where>
			external_batch_id = #{externalBatchId}
		</where>
	</update>
	
	<delete id="deleteBatchHd" parameterType="we.website.model.jym.BatchHdModel">
		delete from jym_m_batch_hd
		<where>
			external_batch_id = #{externalBatchId}
		</where>
	</delete>
</mapper>
